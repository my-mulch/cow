!function(e){var t={};function n(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(r,s,function(t){return e[t]}.bind(null,s));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);class r{constructor(e){this.context=e.context||window,this.bindings=e.bindings||{},this.pressedKeys=new Set,this.context.addEventListener("keydown",this.addKey.bind(this)),this.context.addEventListener("keyup",this.deleteKey.bind(this))}addKey(e){e.key in this.bindings&&e.preventDefault(),this.pressedKeys.add(e.key)}deleteKey(e){e.key in this.bindings&&e.preventDefault(),this.pressedKeys.delete(e.key)}}class s{constructor(e=window){this.context=e,this.context.addEventListener("mousedown",function(e){}),this.context.addEventListener("mouseup",function(e){}),this.context.addEventListener("mousemove",function(e){})}}var i=[class{constructor(e){this.media=e.toGenerator(),this.animateWait=0}executor(e){setTimeout(e,this.animateWait,this.media.next().value)}step(){return new Promise(this.executor.bind(this))}async render(e,t=null){for(;t=await this.step();)e.context.fillRect(...t.slice(0,2),1,1)}static matches(e){return e.data instanceof Float64Array}},class{constructor(e){this.media=e}createBitmap(){const[e,t]=this.media.header.shape;return createImageBitmap(new ImageData(this.media.data,t,e))}async render(e){e.context.drawImage(await this.createBitmap(),0,0)}static matches(e){return e.data instanceof Uint8ClampedArray}}];class a{constructor(e){this.delay=0,this.source=this.introspect(e)}introspect(e){for(const t of i)if(t.matches(e))return new t(e);return null}render(e){this.source&&this.source.render(e)}}function o(e,t){return t.data[t.header.offset+e.reduce(function(e,n,r){return e+n*t.header.stride[r]},0)]}function c(e){return[...function*e(t,n=[]){for(let r=0;r<t[0];r++)t.length>1?yield*e(t.slice(1),n.concat(r)):yield n.concat(r)}(e.header.shape)].map(function(t){return o(t,e)})}function u(e){const t=function(e){return e.reduce(function(e,t){return e.replace(/\$/g,new Array(t).fill("[$]").join(","))},"[$]")}(e.header.shape),n=h(e);return function(e,t){for(;--t>0;){const n=d("]",",","[",[t,1,t]),r=d("]","\n","[",[t,t,t]);e=e.replace(new RegExp(l(n),"g"),r)}return e}(t.replace(/\[\$\]/g,n),e.header.shape.length)}function h(e){return function(e){return function(){return e.next().value}}(p(c(e)))}function d(e,t,n,r){return e.repeat(r[0])+t.repeat(r[1])+n.repeat(r[2])}function l(e){return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}function*f(e,t,n){for(;e<t;)yield e,e+=n}function*p(e){yield*e}class y{constructor(e){this.shape=e.shape,this.stride=void 0!==e.stride?e.stride:y.getStride(this.shape),this.offset=void 0!==e.offset?e.offset:0,this.contig=void 0===e.contig||e.contig}static getStride(e,t=1){return e.reduceRight(function(e,t){return[t*e[0]].concat(e)},[t]).slice(1)}static isContiguousSlice(e){const t=[...e.keys()].filter(function(t){return!(e[t]>=0)});return!t.length||function(e){return!isNaN(parseFloat(e))&&isFinite(e)}(t.reduce(function(e,t){return!1!==e&&(e+1===t&&t)}))}copy(){return new y(JSON.parse(JSON.stringify(this)))}slice(e){const t=this.copy();t.contig=y.isContiguousSlice(e);for(let n=0,r=0;n<this.shape.length;n++)e[n]>=0&&(t.offset+=this.stride[n]*e[n],t.stride.splice(n-r,1),t.shape.splice(n-r,1),r++);return t}reshape(e){const t=this.copy(),n=t.stride.slice(-1).pop();return t.shape=e,t.stride=y.getStride(e,n),t}transpose(){const e=this.copy();return e.stride.reverse(),e.shape.reverse(),e}}var g={int8:Int8Array,uint8:Uint8ClampedArray,int16:Int16Array,uint16:Uint16Array,int32:Int32Array,uint32:Uint32Array,float32:Float32Array,float64:Float64Array};class w{constructor(){}_c1(e,t="float64"){const n=function*e(t){for(let n=0;n<t.length;n++)Array.isArray(t[n])?yield*e(t[n]):yield t[n]}(e),r=g[t];return this.data=new r(n),this.header=new y({shape:function e(t,n=[]){return t.length?e(t[0],n.concat(t.length)):n}(e)}),this}_c2(e,t){return this.data=e,this.header=t,this}static array(e,t="float64"){return(new w)._c1(e,t)}static arange(...e){return(new w)._c1(function(e){return 1===e.length?[...f(0,e[0],1)]:2===e.length?[...f(e[0],e[1],1)]:3===e.length?[...f(e[0],e[1],e[2])]:void 0}(e))}slice(...e){const t=this.header.slice(e);return t.shape.length?(new w)._c2(this.data,t):this.data[t.offset]}reshape(...e){return this.header.contig?(new w)._c2(this.data,this.header.reshape(e)):(new w)._c2((new w)._c1(this.toRawArray()).data,new y({shape:e}))}dot(e){return(new w)._c2(...function(e,t,n=Float64Array){const r=e.header.shape[1],s=new y({shape:[e.header.shape[0],t.header.shape[1]]}),i=new n(function(e){return e.reduce(function(e,t){return e*t},1)}(s.shape));for(let n=0,a=0;n<s.shape[0];n++)for(let c=0;c<s.shape[1];c++){for(let s=0;s<r;s++)i[a]+=o([n,s],e)*o([s,c],t);a++}return[i,s]}(this,e))}T(){return(new w)._c2(this.data,this.header.transpose())}toRawArray(){return function e(t,n=(()=>0)){return t.length?new Array(t[0]).fill(null).map(function(){return e(t.slice(1),n)}):n()}(this.header.shape,h(this))}toGenerator(){return p(this.toRawArray())}inspect(){return this.toString()}toString(){return u(this)+"\n"}}var m={parseSocketMessage:function(e){const t=JSON.parse(e);return[t.rawArray,t.arrayType]}};class v{constructor(e){this.origin=e.origin,this.mediaManager=new a(e.data)}render(e){this.mediaManager.render(e)}static createFromSocketMessage(e){const[t,n]=m.parseSocketMessage(e.data);return new v({data:w.array(t,n)})}}new class{constructor(e){this.scene=e.scene,this.socket=e.socket,this.pods=e.pods||[],this.socket.listen("message",this.addPodFromSocketMessage.bind(this)),window.setInterval(this.render.bind(this))}addPodFromSocketMessage(e){this.pods.push(v.createFromSocketMessage(e))}render(){this.scene.render(this.pods.slice())}}({scene:new class{constructor(e){this.canvas=e.canvas||document.getElementById("canvas"),this.context=this.canvas.getContext("2d"),this.keyboard=e.keyboard||new r({}),this.mouse=e.mouse||new s,this.width=this.canvas.clientWidth,this.height=this.canvas.clientHeight}render(e,t=null){for(;t=e.pop();)t.render(this)}}({}),socket:new class{constructor(e){this.port=e.port||3e3,this.host=e.host||"localhost",this.socket=new WebSocket(`ws://${this.host}:${this.port}/`)}listen(e,t){this.socket.addEventListener(e,t)}}({})})}]);