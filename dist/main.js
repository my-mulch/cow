!function(t){var e={};function n(r){if(e[r])return e[r].exports;var s=e[r]={i:r,l:!1,exports:{}};return t[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(r,s,function(e){return t[e]}.bind(null,s));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";function r(t,e){return e.data[e.header.offset+t.reduce(function(t,n,r){return t+n*e.header.stride[r]},0)]}function s(t){return[...function*t(e,n=[]){for(let r=0;r<e[0];r++)e.length>1?yield*t(e.slice(1),n.concat(r)):yield n.concat(r)}(t.header.shape)].map(function(e){return r(e,t)})}function i(t){const e=function(t){return t.reduce(function(t,e){return t.replace(/\$/g,new Array(e).fill("[$]").join(","))},"[$]")}(t.header.shape),n=o(t);return function(t,e){for(;--e>0;){const n=a("]",",","[",[e,1,e]),r=a("]","\n","[",[e,e,e]);t=t.replace(new RegExp(c(n),"g"),r)}return t}(e.replace(/\[\$\]/g,n),t.header.shape.length)}function o(t){return function(t){return function(){return t.next().value}}(u(s(t)))}function a(t,e,n,r){return t.repeat(r[0])+e.repeat(r[1])+n.repeat(r[2])}function c(t){return t.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}function*h(t,e,n){for(;t<e;)yield t,t+=n}function*u(t){yield*t}n.r(e);class d{constructor(t){this.shape=t.shape,this.stride=void 0!==t.stride?t.stride:d.getStride(this.shape),this.offset=void 0!==t.offset?t.offset:0,this.contig=void 0===t.contig||t.contig}static getStride(t,e=1){return t.reduceRight(function(t,e){return[e*t[0]].concat(t)},[e]).slice(1)}static isContiguousSlice(t){const e=[...t.keys()].filter(function(e){return!(t[e]>=0)});return!e.length||function(t){return!isNaN(parseFloat(t))&&isFinite(t)}(e.reduce(function(t,e){return!1!==t&&(t+1===e&&e)}))}copy(){return new d(JSON.parse(JSON.stringify(this)))}slice(t){const e=this.copy();e.contig=d.isContiguousSlice(t);for(let n=0,r=0;n<this.shape.length;n++)t[n]>=0&&(e.offset+=this.stride[n]*t[n],e.stride.splice(n-r,1),e.shape.splice(n-r,1),r++);return e}reshape(t){const e=this.copy(),n=e.stride.slice(-1).pop();return e.shape=t,e.stride=d.getStride(t,n),e}transpose(){const t=this.copy();return t.stride.reverse(),t.shape.reverse(),t}}class l{constructor(){}_c1(t,e=Float64Array){return this.data=new e(function*t(e){for(let n=0;n<e.length;n++)Array.isArray(e[n])?yield*t(e[n]):yield e[n]}(t)),this.header=new d({shape:function t(e,n=[]){return e.length?t(e[0],n.concat(e.length)):n}(t)}),this}_c2(t,e){return this.data=t,this.header=e,this}static array(t,e=Float64Array){return(new l)._c1(t,e)}static arange(...t){return(new l)._c1(function(t){return 1===t.length?[...h(0,t[0],1)]:2===t.length?[...h(t[0],t[1],1)]:3===t.length?[...h(t[0],t[1],t[2])]:void 0}(t))}slice(...t){const e=this.header.slice(t);return e.shape.length?(new l)._c2(this.data,e):this.data[e.offset]}reshape(...t){return this.header.contig?(new l)._c2(this.data,this.header.reshape(t)):(new l)._c1(s(this))}dot(t){return(new l)._c2(...function(t,e,n=Float64Array){const s=t.header.shape[1],i=new d({shape:[t.header.shape[0],e.header.shape[1]]}),o=new n(function(t){return t.reduce(function(t,e){return t*e},1)}(i.shape));for(let n=0,a=0;n<i.shape[0];n++)for(let c=0;c<i.shape[1];c++){for(let i=0;i<s;i++)o[a]+=r([n,i],t)*r([i,c],e);a++}return[o,i]}(this,t))}T(){return(new l)._c2(this.data,this.header.transpose())}toRawArray(){return function t(e,n=(()=>0)){return e.length?new Array(e[0]).fill(null).map(function(){return t(e.slice(1),n)}):n()}(this.header.shape,o(this))}toGenerator(){return u(this.toRawArray())}inspect(){return this.toString()}toString(){return i(this)+"\n"}}class f{constructor(t){this.downTime=t.downTime||0,this.height=t.height||200,this.width=t.width||200,this.depth=t.depth||200,this.origin=t.origin||l.array([0,0,0,1]),this.data=t.data.toGenerator()||null}static createFrom(t){return new f({data:l.array(JSON.parse(t.data)),downTime:50})}executor(t){setTimeout(t,this.downTime,this.data.next().value)}step(){return new Promise(this.executor.bind(this))}}new class{constructor(t){this.canvas=t.canvas,this.context=this.canvas.getContext("2d"),this.pods=t.pods||[],this.keyboard=t.keyboard||null,this.mouse=t.mouse||null,this.socket=t.socket||null,this.socket.listen("message",this.addPod.bind(this)),this.width=this.canvas.clientWidth,this.height=this.canvas.clientHeight,window.setInterval(this.render.bind(this))}addPod(t){this.pods.push(f.createFrom(t))}async render(){for(;this.pods.length;){let t;const e=this.pods.pop();for(;t=await e.step();)this.context.fillRect(...t.slice(0,2),3,3)}}}({socket:new class{constructor(t,e){this.port=t,this.host=e,this.socket=new WebSocket(`ws://${this.host}:${this.port}/`)}listen(t,e){this.socket.addEventListener(t,e)}}(3e3,"localhost"),canvas:document.getElementById("canvas"),keyboard:new class{constructor(t,e=window){this.context=e,this.bindings=t,this.pressedKeys=new Set,this.context.addEventListener("keydown",this.addKey.bind(this)),this.context.addEventListener("keyup",this.deleteKey.bind(this))}addKey(t){t.key in this.bindings&&t.preventDefault(),this.pressedKeys.add(t.key)}deleteKey(t){t.key in this.bindings&&t.preventDefault(),this.pressedKeys.delete(t.key)}}({}),mouse:new class{constructor(t=window){this.context=t,this.context.addEventListener("mousedown",function(t){}),this.context.addEventListener("mouseup",function(t){}),this.context.addEventListener("mousemove",function(t){})}}})}]);