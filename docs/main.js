!function(e){var t={};function i(s){if(t[s])return t[s].exports;var d=t[s]={i:s,l:!1,exports:{}};return e[s].call(d.exports,d,d.exports,i),d.l=!0,d.exports}i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var d in e)i.d(s,d,function(t){return e[t]}.bind(null,d));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){"use strict";i.r(t);class s{constructor(e){this.dom=e.dom,this.media=e.media,this.handler=e.handler,this.frames=[],this.session=null,this.tape=this.dom.backfeed.getContext("2d"),this.dom.video.addEventListener("play",this.play.bind(this)),this.dom.video.addEventListener("pause",this.pause.bind(this)),navigator.mediaDevices.getUserMedia(this.media).then(this.connect.bind(this))}record(){this.tape.drawImage(this.dom.video,0,0,400,400),this.frames.push(this.tape.getImageData(0,0,400,400).data)}play(){this.session=setInterval(this.record.bind(this))}pause(){clearInterval(this.session),this.handler([this.frames])}connect(e){this.dom.video.srcObject=e}}class d{constructor(e){this.dom=e.dom,this.handler=e.handler,this.dom.livefeed.addEventListener("drop",this.read.bind(this),!1),this.dom.livefeed.addEventListener("dragover",this.ignore,!1)}ignore(e){e.stopPropagation(),e.preventDefault()}read(e){this.ignore(e);for(const t of e.dataTransfer.files){const e=new FileReader;e.onloadend=function(){this.handler({meta:t,data:e.result})}.bind(this),e.readAsArrayBuffer(t)}}}class n{constructor(e){this.dom=e.dom,this.isPressed=!1,this.dom.livefeed.addEventListener("mousedown",this.clickDown.bind(this)),this.dom.livefeed.addEventListener("mouseup",this.clickUp.bind(this)),this.dom.livefeed.addEventListener("mousemove",this.move.bind(this))}move(e){}clickUp(e){this.isPressed=!1,console.log(e)}clickDown(e){this.isPressed=!0,console.log(e)}}class o{constructor(e){this.elements=e.elements,this.pressedKeys=new Set,window.addEventListener("keyup",this.keyu.bind(this)),window.addEventListener("keydown",this.keyd.bind(this))}keyd(e){this.pressedKeys.add(e.key)}keyu(e){this.pressedKeys=new Set}}class r{constructor(e){this.dom=e.dom,this.media=e.media,this.handler=e.handler,this.samples=[],this.recording=null,this.reader=new FileReader,this.reader.onloadend=this.save.bind(this),this.dom.audio.addEventListener("play",this.play.bind(this)),this.dom.audio.addEventListener("pause",this.pause.bind(this)),navigator.mediaDevices.getUserMedia(this.media).then(this.connect.bind(this))}play(){this.recording.start()}pause(){this.recording.stop()}save(){(new window.AudioContext).decodeAudioData(this.reader.result).then(this.send.bind(this))}send(e){this.handler(e.getChannelData(0))}record(e){this.reader.readAsArrayBuffer(e.data)}connect(e){this.dom.audio.srcObject=e,this.recording=new MediaRecorder(e),this.recording.ondataavailable=this.record.bind(this)}}window.app=new class{constructor(e){this.dom=e.dom,this.boxes=new Array,this.mouse=new n({dom:this.dom}),this.keyboard=new o({dom:this.dom}),this.microphone=new r({dom:this.dom,media:{audio:!0},handler:this.loadfeed.bind(this)}),this.camera=new s({dom:this.dom,media:{video:!0},handler:this.loadfeed.bind(this)}),this.fileDrop=new d({dom:this.dom,handler:this.loadfeed.bind(this)})}loadfeed(e){this.boxes.push(e)}}({dom:{livefeed:document.getElementById("live-feed"),backfeed:document.getElementById("back-feed"),video:document.getElementById("video"),audio:document.getElementById("audio")}})}]);