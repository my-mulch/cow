!function(t){var e={};function r(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(n,s,function(e){return t[e]}.bind(null,s));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=4)}([function(t,e,r){(function(t){var n=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),r={},n=0;n<e.length;n++)r[e[n]]=Object.getOwnPropertyDescriptor(t,e[n]);return r},s=/%[sdj%]/g;e.format=function(t){if(!w(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(o(arguments[r]));return e.join(" ")}r=1;for(var n=arguments,i=n.length,a=String(t).replace(s,function(t){if("%%"===t)return"%";if(r>=i)return t;switch(t){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(t){return"[Circular]"}default:return t}}),u=n[r];r<i;u=n[++r])g(u)||!v(u)?a+=" "+u:a+=" "+o(u);return a},e.deprecate=function(r,n){if(void 0!==t&&!0===t.noDeprecation)return r;if(void 0===t)return function(){return e.deprecate(r,n).apply(this,arguments)};var s=!1;return function(){if(!s){if(t.throwDeprecation)throw new Error(n);t.traceDeprecation?console.trace(n):console.error(n),s=!0}return r.apply(this,arguments)}};var i,a={};function o(t,r){var n={seen:[],stylize:c};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),p(r)?n.showHidden=r:r&&e._extend(n,r),y(n.showHidden)&&(n.showHidden=!1),y(n.depth)&&(n.depth=2),y(n.colors)&&(n.colors=!1),y(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=u),l(n,t,n.depth)}function u(t,e){var r=o.styles[e];return r?"["+o.colors[r][0]+"m"+t+"["+o.colors[r][1]+"m":t}function c(t,e){return t}function l(t,r,n){if(t.customInspect&&r&&z(r.inspect)&&r.inspect!==e.inspect&&(!r.constructor||r.constructor.prototype!==r)){var s=r.inspect(n,t);return w(s)||(s=l(t,s,n)),s}var i=function(t,e){if(y(e))return t.stylize("undefined","undefined");if(w(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}if(m(e))return t.stylize(""+e,"number");if(p(e))return t.stylize(""+e,"boolean");if(g(e))return t.stylize("null","null")}(t,r);if(i)return i;var a=Object.keys(r),o=function(t){var e={};return t.forEach(function(t,r){e[t]=!0}),e}(a);if(t.showHidden&&(a=Object.getOwnPropertyNames(r)),x(r)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return h(r);if(0===a.length){if(z(r)){var u=r.name?": "+r.name:"";return t.stylize("[Function"+u+"]","special")}if(b(r))return t.stylize(RegExp.prototype.toString.call(r),"regexp");if($(r))return t.stylize(Date.prototype.toString.call(r),"date");if(x(r))return h(r)}var c,v="",j=!1,O=["{","}"];(d(r)&&(j=!0,O=["[","]"]),z(r))&&(v=" [Function"+(r.name?": "+r.name:"")+"]");return b(r)&&(v=" "+RegExp.prototype.toString.call(r)),$(r)&&(v=" "+Date.prototype.toUTCString.call(r)),x(r)&&(v=" "+h(r)),0!==a.length||j&&0!=r.length?n<0?b(r)?t.stylize(RegExp.prototype.toString.call(r),"regexp"):t.stylize("[Object]","special"):(t.seen.push(r),c=j?function(t,e,r,n,s){for(var i=[],a=0,o=e.length;a<o;++a)S(e,String(a))?i.push(f(t,e,r,n,String(a),!0)):i.push("");return s.forEach(function(s){s.match(/^\d+$/)||i.push(f(t,e,r,n,s,!0))}),i}(t,r,n,o,a):a.map(function(e){return f(t,r,n,o,e,j)}),t.seen.pop(),function(t,e,r){if(t.reduce(function(t,e){return 0,e.indexOf("\n")>=0&&0,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60)return r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1];return r[0]+e+" "+t.join(", ")+" "+r[1]}(c,v,O)):O[0]+v+O[1]}function h(t){return"["+Error.prototype.toString.call(t)+"]"}function f(t,e,r,n,s,i){var a,o,u;if((u=Object.getOwnPropertyDescriptor(e,s)||{value:e[s]}).get?o=u.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):u.set&&(o=t.stylize("[Setter]","special")),S(n,s)||(a="["+s+"]"),o||(t.seen.indexOf(u.value)<0?(o=g(r)?l(t,u.value,null):l(t,u.value,r-1)).indexOf("\n")>-1&&(o=i?o.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+o.split("\n").map(function(t){return"   "+t}).join("\n")):o=t.stylize("[Circular]","special")),y(a)){if(i&&s.match(/^\d+$/))return o;(a=JSON.stringify(""+s)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+o}function d(t){return Array.isArray(t)}function p(t){return"boolean"==typeof t}function g(t){return null===t}function m(t){return"number"==typeof t}function w(t){return"string"==typeof t}function y(t){return void 0===t}function b(t){return v(t)&&"[object RegExp]"===j(t)}function v(t){return"object"==typeof t&&null!==t}function $(t){return v(t)&&"[object Date]"===j(t)}function x(t){return v(t)&&("[object Error]"===j(t)||t instanceof Error)}function z(t){return"function"==typeof t}function j(t){return Object.prototype.toString.call(t)}function O(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(r){if(y(i)&&(i=t.env.NODE_DEBUG||""),r=r.toUpperCase(),!a[r])if(new RegExp("\\b"+r+"\\b","i").test(i)){var n=t.pid;a[r]=function(){var t=e.format.apply(e,arguments);console.error("%s %d: %s",r,n,t)}}else a[r]=function(){};return a[r]},e.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=d,e.isBoolean=p,e.isNull=g,e.isNullOrUndefined=function(t){return null==t},e.isNumber=m,e.isString=w,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=y,e.isRegExp=b,e.isObject=v,e.isDate=$,e.isError=x,e.isFunction=z,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=r(2);var E=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function S(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){var t,r;console.log("%s - %s",(t=new Date,r=[O(t.getHours()),O(t.getMinutes()),O(t.getSeconds())].join(":"),[t.getDate(),E[t.getMonth()],r].join(" ")),e.format.apply(e,arguments))},e.inherits=r(3),e._extend=function(t,e){if(!e||!v(e))return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t};var T="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function A(t,e){if(!t){var r=new Error("Promise was rejected with a falsy value");r.reason=t,t=r}return e(t)}e.promisify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(T&&t[T]){var e;if("function"!=typeof(e=t[T]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,T,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var e,r,n=new Promise(function(t,n){e=t,r=n}),s=[],i=0;i<arguments.length;i++)s.push(arguments[i]);s.push(function(t,n){t?r(t):e(n)});try{t.apply(this,s)}catch(t){r(t)}return n}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),T&&Object.defineProperty(e,T,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,n(t))},e.promisify.custom=T,e.callbackify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');function r(){for(var r=[],n=0;n<arguments.length;n++)r.push(arguments[n]);var s=r.pop();if("function"!=typeof s)throw new TypeError("The last argument must be of type Function");var i=this,a=function(){return s.apply(i,arguments)};e.apply(this,r).then(function(e){t.nextTick(a,null,e)},function(e){t.nextTick(A,e,a)})}return Object.setPrototypeOf(r,Object.getPrototypeOf(e)),Object.defineProperties(r,n(e)),r}}).call(this,r(1))},function(t,e){var r,n,s=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function o(t){if(r===setTimeout)return setTimeout(t,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(t){r=i}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(t){n=a}}();var u,c=[],l=!1,h=-1;function f(){l&&u&&(l=!1,u.length?c=u.concat(c):h=-1,c.length&&d())}function d(){if(!l){var t=o(f);l=!0;for(var e=c.length;e;){for(u=c,c=[];++h<e;)u&&u[h].run();h=-1,e=c.length}u=null,l=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function g(){}s.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];c.push(new p(t,e)),1!==c.length||l||o(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=g,s.addListener=g,s.once=g,s.off=g,s.removeListener=g,s.removeAllListeners=g,s.emit=g,s.prependListener=g,s.prependOnceListener=g,s.listeners=function(t){return[]},s.binding=function(t){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(t){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},function(t,e){"function"==typeof Object.create?t.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},function(t,e,r){"use strict";r.r(e);const n=":",s="-",a="*",o="of",u="max",c="min",l="add",h="sum",f="mean",d="norm",p="round",g="assign",m="divide",w="default",y="subtract",b="multiply",v="shape",$="offset",x="contig",z="strides",O=/\d+/,E=/\d*:\d*/,S=function(t){return new Function("args",`\n        const i0 = this.suite[${t[0]}] || (this.suite[${t[0]}] = {})\n\n        ${t.map(function(t,e){return e?`const i${e} = i${e-1}[${t}] || (i${e-1}[${t}] = {})`:""}).join("\n")}\n        \n        return i${t.length-1}[args.method] || i${t.length-1}\n    `)},T=function(t){return new Function("args",`\n        let func = this.route(args)\n\n        if (func.constructor === Object)\n            ${A(t)}   \n\n        return func(args)\n    `)},A=function(t){return`switch(args.method){\n        ${Object.entries(t).map(function([t,e]){return`case '${t}': ${Object.keys(e).map(function(e,r){return(r?"else ":"")+`if(${e}){ \n                    func = \n                    func[args.method] = \n                    this.methods['${t}']['${e}'].call(null, args) \n                }`}).join("\n")} break`}).join("\n")}\n    }`};class I{constructor({hash:t,...e}){this.suite={},this.hash=t,this.methods=e,this.call=T(this.methods).bind(this),this.route=S(this.hash).bind(this)}static suite(t){return new I(t)}}const F=function(t){return t.join("\n")},N=function(t){const e=[],r=[],n=[...t.keys()];for(let n=0;n<t.length;n++)t[n]===s?r.push(n):e.push(n);return[e,r,n]},M=function(t,e,r,n){let s=r+e.offset,i=1;for(const r of t.slice().reverse()){const t=e.shape[r],a=e.strides[r],o=Math.floor(n/i)%t;i*=t,s+=o*a}return s},k=function({count:t,map:e,reduce:r,metaindices:n}){const s=new Array(t);for(let t=0;t<s.length;t++)s[t]=e(...n.map(function(e){return M(...e,t)}));return r(s)},P=function(t,e,r=0){return`args.${e}.offset + ${t.map(function(t,e){return function(r,n){return`a${r+e} * args.${t}.strides[${n}]`}}(e,r)).join(" + ")||0}`},_=function(t,e,r){return`${t.map(function(t){return function(e,r){return`for(let a${e} = 0; a${e} < args.${t}.shape[${e}]; a${e}++){`}}(e)).join("\n")} \n                ${r} \n            ${"}".repeat(t.length)}`};var D=function(t){const[e,r,n]=N(Array.from(this.axes));return`\n        ${t.global}\n        \n        ${_(e,o,`\n            const ri = ${P(e,"result")}\n            ${t.init}\n            \n            ${_(r,o,`\n                const ai = ${P(n,o)}\n                ${t.reduce}\n            `)}\n            \n            args.result.data[ri] = ${t.assign}\n        `)}\n            \n        return args.result\n    `},L={argmax:function(t){return new Function("args",D.call(t,{init:"let valmax = Number.POSITIVE_INFINITY, argmax = 0",reduce:"if(args.of.data[ai] > valmax) { valmax = args.of.data[ai]; argmax = a0 }",assign:"argmax"}))},argmin:function(t){return new Function("args",D.call(t,{init:"let valmin = Number.POSITIVE_INFINITY, argmin = 0",reduce:"if(args.of.data[ai] < valmin) { valmin = args.of.data[ai]; argmin = a0 }",assign:"argmin"}))},min:function(t){return new Function("args",D.call(t,{init:"let min = Number.POSITIVE_INFINITY",reduce:"min = Math.min(min, args.of.data[ai])",assign:"min"}))},max:function(t){return new Function("args",D.call(t,{init:"let max = Number.NEGATIVE_INFINITY",reduce:"max = Math.max(max, args.of.data[ai])",assign:"max"}))},mean:function(t){return new Function("args",D.call(t,{global:`const sizeOfInnerAxes = ${t.of.size/t.result.size}`,init:"let sum = 0",reduce:"sum += args.of.data[ai]",assign:"sum / sizeOfInnerAxes"}))},norm:function(t){return new Function("args",D.call(t,{init:"let sumSquares = 0",reduce:"sumSquares += args.of.data[ai] * args.of.data[ai]",assign:"Math.sqrt(sumSquares)"}))},prod:function(t){return new Function("args",D.call(t,{init:"let prod = 1",reduce:"prod *= args.of.data[ai]",assign:"prod"}))},round:function(t){return new Function("args",D.call(t,{assign:"args.of.data[ai].toFixed(args.precision)"}))},sum:function(t){return new Function("args",D.call(t,{init:"let sum = 0",reduce:"sum += args.of.data[ai]",assign:"sum"}))},cumsum:function(t){return new Function("args",D.call(t,{init:`let cumsum = 0, av = a${axis}`,reduce:`if(a${axis} <= av) cumsum += args.of.data[ai]`,assign:"cumsum"}))},cumprod:function(t){return new Function("args",D.call(t,{init:`let cumprod = 1, av = a${axis}`,reduce:`if(a${axis} <= av) cumprod *= args.of.data[ai]`,assign:"cumprod"}))}},R=function(t){const[e,r,n]=N(Array.from(this.axes)),s=[...e.keys()];return`\n        ${t.global}\n        \n        ${k({count:this.result.size,metaindices:[[s,this.result,0],[e,this.of,0]],reduce:F,map:function(e,n){return`\n                    ${t.init}\n                        \n                    ${k({count:this.of.size/this.result.size,metaindices:[[r,this.of,n]],map:function(e){return t.map(`args.of.data[${e}]`)},reduce:t.reduce})}\n\n                    args.result.data[${e}] = ${t.assign}\n                `}.bind(this)})}\n            \n        return args.result\n    `},U={argmax:function(t){return new Function("args",R.call(t,{global:"let argmax, valmax",init:"argmax = 0, valmax = Number.NEGATIVE_INFINITY",map:function(t){return`if(${t} > valmax) valmax = ${t}, argmax = ${i}`},reduce:F,assign:"argmax"}))},argmin:function(t){return new Function("args",R.call(t,{global:"let argmin, valmin",init:"argmin = 0, valmin = Number.POSITIVE_INFINITY",map:function(t){return`if(${t} > valmin) valmin = ${t}, argmin = ${i}`},reduce:F,assign:"argmin"}))},max:function(t){return new Function("args",R.call(t,{global:"let max",init:"max = Number.NEGATIVE_INFINITY",map:function(t){return`if(${t} > max) max = ${t}`},reduce:F,assign:"max"}))},min:function(t){return new Function("args",R.call(t,{global:"let min",init:"min = Number.POSITIVE_INFINITY",map:function(t){return`if(${t} < min) min = ${t}`},reduce:F,assign:"min"}))},mean:function(t){return new Function("args",R.call(t,{global:`let mean; const innerSize = ${t.of.size/t.result.size}`,map:function(t){return t},reduce:function(t){return`mean = (${t.join("+")}) / innerSize`},assign:"mean"}))},norm:function(t){return new Function("args",R.call(t,{global:"let norm",map:function(t){return`${t} * ${t}`},reduce:function(t){return`norm = Math.sqrt(${t.join("+")})`},assign:"norm"}))},prod:function(t){return new Function("args",R.call(t,{global:"let prod",map:function(t){return t},reduce:function(t){return`prod = ${t.join("*")}`},assign:"prod"}))},round:function(t){return new Function("args",R.call(t,{global:"let rounded",map:function(t){return`${t}.toFixed(args.precision)`},reduce:function(t){return`rounded = ${t.toString()}`},assign:"rounded"}))},sum:function(t){return new Function("args",R.call(t,{global:"let sum",map:function(t){return t},reduce:function(t){return`sum = ${t.join("+")}`},assign:"sum"}))},cumsum:function(t){let e=-1;return new Function("args",R.call(t,{global:"cumsum",map:function(t){return t},reduce:function(t){return e++,`cumsum = ${t.filter(function(t,r){return r<=e}).join("+")}`},assign:"cumsum"}))},cumprod:function(t){let e=-1;return new Function("args",R.call(t,{global:"cumprod",map:function(t){return t},reduce:function(t){return e++,`cumprod = ${t.filter(function(t,r){return r<=e}).join("*")}`},assign:"cumprod"}))}},C=I.suite({argmax:{"args.of.size / args.result.size <= 40":U.argmax,"args.of.size / args.result.size > 40":L.argmax},argmin:{"args.of.size / args.result.size <= 40":U.argmin,"args.of.size / args.result.size > 40":L.argmin},min:{"args.of.size / args.result.size <= 40":U.min,"args.of.size / args.result.size > 40":L.min},max:{"args.of.size / args.result.size <= 40":U.max,"args.of.size / args.result.size > 40":L.max},mean:{"args.of.size / args.result.size <= 40":U.mean,"args.of.size / args.result.size > 40":L.mean},norm:{"args.of.size / args.result.size <= 15":U.norm,"args.of.size / args.result.size > 15":L.norm},prod:{"args.of.size / args.result.size <= 40":U.prod,"args.of.size / args.result.size > 40":L.prod},round:{true:L.round},sum:{"args.of.size / args.result.size <= 40":U.sum,"args.of.size / args.result.size > 40":L.sum},cumsum:{"args.of.size / args.result.size <= 40":U.cumsum,"args.of.size / args.result.size > 40":L.cumsum},cumprod:{"args.of.size / args.result.size <= 40":U.cumprod,"args.of.size / args.result.size > 40":L.cumprod},hash:["args.of.id","args.result.id"]}),B=function(t){const e=[...this.of.shape.keys()],r=[...this.with.shape.keys()],n=[...this.result.shape.keys()],s=this.of.shape.length-this.with.shape.length;return`\n        ${_(e,o,`\n            const ai = ${P(e,o)}\n            const bi = ${P(r,"with",s)}\n            const ri = ${P(n,"result")}\n\n            args.result.data[ri] = ${t.reduce("args.of.data[ai]","args.with.data[bi]")}\n        `)}\n        \n        return args.result\n    `},V=function(t){const e=[...this.of.shape.keys()],r=[...this.with.shape.keys()],n=[...this.result.shape.keys()];return`\n        ${k({count:this.result.size,metaindices:[[e,this.of,0],[r,this.with,0],[n,this.result,0]],reduce:F,map:function(e,r,n){return`args.result.data[${n}] = ${t.reduce(`args.of.data[${e}]`,`args.with.data[${r}]`)}`}})}\n        \n        return args.result\n    `},Y=function(t,e){return function(r){return new Function("args",e.call(r,{reduce:function(e,r){return`${e}${t}${r}`}}))}},q=I.suite({add:{"args.with.size <= 40":Y.call(null,"+",V),"args.with.size > 40":Y.call(null,"+",B)},subtract:{"args.with.size <= 40":Y.call(null,"-",V),"args.with.size > 40":Y.call(null,"-",B)},multiply:{"args.with.size <= 40":Y.call(null,"*",V),"args.with.size > 40":Y.call(null,"*",B)},divide:{"args.with.size <= 40":Y.call(null,"/",V),"args.with.size > 40":Y.call(null,"/",B)},assign:{"args.with.size <= 40":Y.call(null,"=",V),"args.with.size > 40":Y.call(null,"=",B)},hash:["args.of.id","args.with.id","args.result.id"]});const H=function(t,e){return void 0===e&&([t,e]=J.call(this,t)),this.offset+t*this.strides[0]+e*this.strides[1]},J=function(t){const e=this.shape[0];return[Math.floor(t/e)%this.shape[0],Math.floor(t/1)%this.shape[1]]},G=function(t,e,r){const n=Math.round(Math.sqrt(t.length));return t.filter(function(t,s){return s%n!==r&&Math.floor(s/n)!==e})};var K=I.suite({default:{"args.result.size > 25":function(t){const e=Math.floor(Math.sqrt(t.result.data.length)),r=t.of.copy();for(let n=0;n<e;n+=1){let s=r.data[r.offset+n*r.strides[0]+n];if(0==s){for(ii=n+1;ii<e;ii+=1)if(0!=r.data[r.offset+ii*r.strides[0]+n]){for(j=0;j<e;j++)s=r.data[r.offset+n*r.strides[0]+j],r.data[r.offset+n*r.strides[0]+j]=r.data[r.offset+ii*r.strides[0]+j],r.data[r.offset+ii*r.strides[0]+j]=s,s=t.result.data[n*e+j],t.result.data[n*e+j]=t.result.data[ii*e+j],t.result.data[ii*e+j]=s;break}if(0==(s=r.data[r.offset+n*r.strides[0]+n]))return}for(let i=0;i<e;i++)r.data[r.offset+n*r.strides[0]+i]=r.data[r.offset+n*r.strides[0]+i]/s,t.result.data[n*e+i]=t.result.data[n*e+i]/s;for(let i=0;i<e;i++)if(i!=n){s=r.data[r.offset+i*r.strides[0]+n];for(let a=0;a<e;a++)r.data[r.offset+i*r.strides[0]+a]-=s*r.data[r.offset+n*r.strides[0]+a],t.result.data[i*e+a]-=s*t.result.data[n*e+a]}}return t.result},"args.result.size <= 25":function(t){const e=Math.round(Math.sqrt(t.of.size)),r=[...new Array(t.of.size).keys()];return new Function("args",`\n        ${new Array(t.result.size).fill(null).map(function(n,s){const i=Math.floor(s/e),a=s%e;return`args.result.data[${H.call(t.result,i,a)}] = ${Math.pow(-1,(i+a)%2)} * (${function t(e){const r=Math.round(Math.sqrt(e.length));if(1===r)return`args.of.data[${H.call(this,e[0])}]`;if(2===r){const t=H.call(this,e[0]),r=H.call(this,e[1]),n=H.call(this,e[2]);return`args.of.data[${t}] * args.of.data[${H.call(this,e[3])}] - args.of.data[${n}] * args.of.data[${r}]`}const n=[];for(let s=0;s<r;s++){const r=Math.pow(-1,s%2),i=`args.of.data[${H.call(this,e[s])}]`,a=t.call(this,G(e,0,s));n.push(`${r} * ${i} * (${a})`)}return n.join(" + ")}.call(t.of,G(r,a,i))})`}).join("\n")}\n\n        const det = ${new Array(e).fill(null).map(function(e,r){return`args.of.data[${H.call(t.of,0,r)}] * args.result.data[${H.call(t.result,r,0)}]`}).join(" + ")}\n\n        ${new Array(t.result.size).fill(null).map(function(r,n){const s=Math.floor(n/e),i=n%e;return`args.result.data[${H.call(t.result,s,i)}] /= det`}).join("\n")}\n\n        return args.result\n    `)}},hash:["args.of.id","args.result.id"]}),W=I.suite({default:{"args.result.size > 500":function(){return function(t){for(let e=0;e<t.of.shape[0];e++)for(let r=0;r<t.with.shape[1];r++)for(let n=0;n<t.of.shape[1];n++)t.result.data[e*t.with.shape[1]+r]+=t.of.data[e*t.of.strides[0]+n*t.of.strides[1]+t.of.offset]*t.with.data[r*t.with.strides[1]+n*t.with.strides[0]+t.with.offset];return t.result}},"args.result.size <= 500":function(t){const e=t.of.shape[0],r=t.with.shape[1],n=t.of.shape[1];return new Function("args",`\n        ${new Array(e*r).fill(null).map(function(s,i){const[a,o]=[Math.floor(i/r)%e,Math.floor(i/1)%r];return`args.result.data[${t.result.offset+a*t.result.strides[0]+o*t.result.strides[1]}] = ${new Array(n).fill(null).map(function(e,r){return`args.of.data[${a*t.of.strides[0]+r*t.of.strides[1]+t.of.offset}] * args.with.data[${o*t.with.strides[1]+r*t.with.strides[0]+t.with.offset}]`}).join("+")}`}).join("\n")}\n        \n        return args.result\n    `)}},hash:["args.of.id","args.with.id","args.result.id"]}),Z=I.suite({default:{true:function(t){const e=3===t.of.shape[0]?t.of.strides[0]:t.of.strides[1],r=3===t.with.shape[0]?t.with.strides[0]:t.with.strides[1],n=3===t.result.shape[0]?t.result.strides[0]:t.result.strides[1];return new Function("args",`\n                args.result.data[${t.result.offset+0*n}] =\n                    args.of.data[${1*e+t.of.offset}] * args.with.data[${2*r+t.with.offset}] -\n                    args.of.data[${2*e+t.of.offset}] * args.with.data[${1*r+t.with.offset}]\n        \n                args.result.data[${t.result.offset+1*n}] =\n                    args.of.data[${2*e+t.of.offset}] * args.with.data[${0*r+t.with.offset}] -\n                    args.of.data[${0*e+t.of.offset}] * args.with.data[${2*r+t.with.offset}]\n        \n                args.result.data[${t.result.offset+2*n}] =\n                    args.of.data[${0*e+t.of.offset}] * args.with.data[${1*r+t.with.offset}] -\n                    args.of.data[${1*e+t.of.offset}] * args.with.data[${0*r+t.with.offset}]\n        \n                return args.result\n            `)}},hash:["args.of.id","args.with.id","args.result.id"]});const X=function(t,e){return t+Math.floor(Math.random()*(e-t))},Q=Object.assign(Math,{add:function(t,e){return t+e},subtract:function(t,e){return t-e},divide:function(t,e){return t/e},multiply:function(t,e){return t*e}}),tt=function t(e,r=[]){return e.constructor===Number?r:t(e[0],r.concat(e.length))},et=function(){const t=function t(e=this.offset,r=0){if(r===this.shape.length)return n=`${this.data[e]}`,n.indexOf(".")>=0?n:n+".0";var n;return["[","]"].join(new Array(this.shape[r]).fill(null).map(function(n,s){return t.call(this,s*this.strides[r]+e,r+1)},this).join(","+"\n".repeat(this.shape.length-1-r)))}.call(this),e=function(t){return t.match(/-*\d*\./g).reduce(rt,0)-1}(t),r=function(t){return t.match(/\.\d+(e-*\d+)*/g).reduce(rt,0)-1}(t);return t.replace(/-*\d*\.*\d+(e-*\d+)*/g,function(t){return function(t,e,r){let[n,s]=t.split(".");return n=n.padStart(e," "),s=s.padEnd(r," "),`${n}.${s}`}(t,e,r)})};function rt(t,e){return Math.max(t,e.length)}var nt=r(0);const st=function(t){let e=-1;for(let r=0;r<t.length;r++){if(e>=0&&t[r].constructor===String&&r-e>1)return!1;t[r].constructor===String&&(e=r)}return!0},it=function(t,e){const r=new Array(t.length);let n=e||1;r[r.length-1]=n;for(let e=t.length-1;e>0;e--)r[e-1]=n*=t[e];return r},at=function(t,e){const r=new Array(t.length),n=t.reduce(Q.multiply);for(let s=0;s<t.length;s++)r[s]=t[s]<0?-e/n:t[s];return r};class ot{constructor(t){this.shape=v in t?t.shape:[],this.offset=$ in t?t.offset:0,this.contig=!(x in t)||t.contig,this.strides=z in t?t.strides:it(this.shape),this.id=`${this.shape}|${this.strides}|${this.offset}`,this.size=this.shape.reduce(Q.multiply,1),this.lastStride=this.strides[this.strides.length-1],this.axes={ALL:a.repeat(this.shape.length),NONE:s.repeat(this.shape.length)}}copy(){return new ot(JSON.parse(JSON.stringify(this)))}slice(t){const e=new Array,r=new Array,s=st(t);let i=this.offset;for(let s=0;s<this.shape.length;s++)if(t[s]===n||void 0===t[s])e.push(this.shape[s]),r.push(this.strides[s]);else if(E.test(t[s])){let[a,o]=t[s].split(n).map(Number);0===o&&(o=this.shape[s]),i+=this.strides[s]*a,e.push(o-a),r.push(this.strides[s])}else O.test(t[s])&&(i+=this.strides[s]*t[s]);return new ot({shape:e,strides:r,offset:i,contig:s})}axisSlice(t){return new ot({shape:this.shape.filter(function(e,r){return t[r]!==s})})}transpose(){return new ot({shape:this.shape.slice().reverse(),strides:this.strides.slice().reverse(),offset:this.offset,contig:!1})}reshape(t){const e=at(t,this.size);return new ot({shape:e,strides:it(e,this.lastStride)})}}class ut{constructor({header:t,type:e,init:r=function(){return new this.type(this.size)}}){for(const e in t)this[e]=t[e];this.header=t,this.type=e||Float32Array,this.data=r.call(this)}static sanitize(t){void 0!==t.of&&t.of.constructor!==ut&&(t.of=ut.array({with:t.of})),void 0!==t.with&&t.with.constructor!==ut&&(t.with=ut.array({with:t.with})),void 0!==t.result&&t.result.constructor!==ut&&(t.result=ut.array({with:t.result}))}static array(t){return new ut({type:t.type,header:new ot({shape:tt(t.with)}),init:function(){return t.with.constructor===Array?new this.type(t.with.flat(Number.POSITIVE_INFINITY)):t.with.constructor===Number?new this.type(this.size).fill(t.with):t.with.constructor===Int8Array||t.with.constructor===Uint8Array||t.with.constructor===Uint8ClampedArray||t.with.constructor===Int16Array||t.with.constructor===Uint16Array||t.with.constructor===Int32Array||t.with.constructor===Uint32Array||t.with.constructor===Float32Array?t.with:void 0}})}static zeros(t){return new ut({type:t.type,header:new ot({shape:t.shape})})}static ones(t){return new ut({type:t.type,header:new ot({shape:t.shape}),init:function(){return new this.type(this.size).fill(1)}})}static arange(t){return new ut({type:t.type,header:new ot({shape:[Q.round((t.stop-(t.start||0))/(t.step||1))]}),init:function(){const e=new this.type(this.size);for(let r=t.start||0,n=0;r<t.stop;r+=t.step||1,n++)e[n]=r;return e}})}static rand(t){return new ut({type:t.type,header:new ot({shape:t.shape}),init:function(){const t=new this.type(this.size);for(let e=0;e<t.length;e++)t[e]=Q.random();return t}})}static randint(t){return new ut({type:t.type||Int32Array,header:new ot({shape:t.shape}),init:function(){const e=new this.type(this.size);for(let r=0;r<e.length;r++)e[r]=X(t.low,t.high);return e}})}static dot(t){return ut.sanitize(t),W.call({of:t.of,with:t.with,method:w,result:t.result||new ut({type:t.type,header:new ot({shape:[t.of.shape[0],t.with.shape[1]]})})})}static cross(t){return ut.sanitize(t),Z.call({of:t.of,with:t.with,method:w,result:t.result||new ut({type:t.type,header:new ot({shape:[3,1]})})})}static inv(t){return ut.sanitize(t),K.call({of:t.of,method:w,result:t.result||this.eye({shape:t.of.shape})})}static eye(t){return new ut({type:t.type,header:new ot({shape:t.shape}),init:function(){const t=new this.type(this.size),e=this.strides.reduce(Q.add),r=Q.min(...this.shape);for(let n=0;n<r*e;n+=e)t[n]=1;return t}})}copy(t=this){return new ut({type:this.type,header:this.header,init:function(){return t.data.slice()}})}ravel(){return ut.array({with:this.toRaw()}).reshape({shape:[-1]})}gpair(t,e){return ut.sanitize(t),q.call({of:this,with:t.with,method:e,result:t.result||new ut({type:this.type,header:new ot({shape:this.shape})})})}gaxis(t,e){return C.call({of:this,method:e,axes:t.axes||this.axes.NONE,result:t.result||new ut({type:this.type,header:this.header.axisSlice(t.axes||this.axes.NONE)})})}norm(t={}){return this.gaxis(t,d)}mean(t={}){return this.gaxis(t,f)}sum(t={}){return this.gaxis(t,h)}max(t={}){return this.gaxis(t,u)}min(t={}){return this.gaxis(t,c)}add(t){return this.gpair(t,l)}divide(t){return this.gpair(t,m)}subtract(t){return this.gpair(t,y)}multiply(t){return this.gpair(t,b)}inv(t={}){return ut.inv({of:this,result:t.result})}dot(t){return ut.dot({of:this,with:t.with,result:t.result})}cross(t){return ut.cross({of:this,with:t.with,result:t.result})}round(t){return C.call({of:this,method:p,axes:this.axes.ALL,precision:t.precision,result:t.result||new ut({type:this.type,header:new ot({shape:this.shape})})})}slice(t,e=this){return new ut({type:this.type,header:this.header.slice(t.with),init:function(){return e.data}})}T(t=this){return new ut({type:this.type,header:this.header.transpose(),init:function(){return t.data}})}reshape(t,e=this){return this.contig?new ut({type:this.type,header:this.header.reshape(t.shape),init:function(){return e.data}}):ut.array({with:this.toRaw()}).reshape({shape:t.shape})}set(t){return ut.sanitize(t),q.call({of:this,with:t.with,method:g,result:this})}toRaw(){return JSON.parse(this.toString())}valueOf(){return this.data[this.offset]}toString(){return et.call(this)}[nt.inspect.custom](){return this.toString()}}class ct{constructor(t){this.source={},this.shaders={},this.buffers=[],this.size=0,this.program=null,this.runtime=t.runtime}compile(t){return this.source.vertex=t.vertex,this.source.fragment=t.fragment,this.shaders.vertex=this.runtime.createShader(this.runtime.VERTEX_SHADER),this.shaders.fragment=this.runtime.createShader(this.runtime.FRAGMENT_SHADER),this.runtime.shaderSource(this.shaders.vertex,this.source.vertex),this.runtime.shaderSource(this.shaders.fragment,this.source.fragment),this.runtime.compileShader(this.shaders.vertex),this.runtime.compileShader(this.shaders.fragment),this.program=this.runtime.createProgram(),this.runtime.attachShader(this.program,this.shaders.vertex),this.runtime.attachShader(this.program,this.shaders.fragment),this}link(){return this.runtime.linkProgram(this.program),this.runtime.useProgram(this.program),this}feed(t){for(const e of t){this.size+=e.box.shape[0],this.buffers.unshift(this.runtime.createBuffer()),this.runtime.bindBuffer(e.type,this.buffers[0]),this.runtime.bufferData(e.type,e.box.data,e.usage);for(const[t,r]of Object.entries(e.attributes)){const n=this.runtime.getAttribLocation(this.program,t),s=e.box.slice({with:r});this.runtime.vertexAttribPointer(n,s.shape[1],gl.FLOAT,!1,s.strides[0]*s.type.BYTES_PER_ELEMENT,s.offset*s.type.BYTES_PER_ELEMENT),this.runtime.enableVertexAttribArray(n)}}return this}draw(t){return this.runtime.clear(gl.COLOR_BUFFER_BIT),this.runtime.clearColor(0,0,0,1),this.runtime.drawArrays(t.mode,0,this.size),this}}window.bb=ut,window.app=new class{constructor(t){this.boxes=[],this.dom=t.dom,this.sources=t.sources;for(const t of Object.values(this.sources))t.export=this.push.bind(this);this.resize(),window.addEventListener("resize",this.resize.bind(this))}resize(){this.dom.mainstage.width=window.innerWidth,this.dom.mainstage.height=window.innerHeight,this.dom.videofeed.width=window.innerWidth,this.dom.videofeed.height=window.innerHeight,this.dom.audiofeed.style.width=`${window.innerWidth}px`}push(t){this.boxes.push(t)}}({dom:document.all,sources:{mouse:new class{constructor(t){this.isPressed=!1,this.target=t.target,this.target.addEventListener("mousedown",this.clickDown.bind(this)),this.target.addEventListener("mouseup",this.clickUp.bind(this)),this.target.addEventListener("mousemove",this.move.bind(this))}move(t){}clickUp(t){this.isPressed=!1}clickDown(t){this.isPressed=!0}}({target:document.all.mainstage}),filedrop:new class{constructor(t){this.target=t.target,this.target.addEventListener("dragover",this.ignore,!1),this.target.addEventListener("drop",this.read.bind(this),!1)}ignore(t){t.stopPropagation(),t.preventDefault()}read(t){this.ignore(t);for(const e of t.dataTransfer.files){const t=new FileReader;t.onloadend=function(){this.export({meta:e,data:t.result})}.bind(this),t.readAsArrayBuffer(e)}}}({target:document.all.mainstage}),keyboard:new class{constructor(t){this.target=t.target,this.pressedKeys=new Set,this.target.addEventListener("keyup",this.keyup.bind(this)),this.target.addEventListener("keydown",this.keydown.bind(this))}keyup(t){this.pressedKeys=new Set}keydown(t){this.pressedKeys.add(t.key)}}({target:window}),microphone:new class{constructor(t){this.feed=t.feed,this.media=t.media,this.samples=[],this.reader=null,this.context=null,this.recording=null,this.feed.addEventListener("play",this.play.bind(this)),this.feed.addEventListener("pause",this.pause.bind(this)),navigator.mediaDevices.getUserMedia(this.media).then(this.connect.bind(this))}play(){this.recording.start()}pause(){this.recording.stop()}save(){this.context.decodeAudioData(this.reader.result).then(this.send.bind(this))}send(t){this.export(t.getChannelData(0))}record(t){this.reader.readAsArrayBuffer(t.data)}connect(t){this.feed.srcObject=t,this.context=new AudioContext,this.recording=new MediaRecorder(t),this.recording.ondataavailable=this.record.bind(this),this.reader=new FileReader,this.reader.onloadend=this.save.bind(this)}}({media:{audio:!0},feed:document.all.audiofeed}),camcorder:new class{constructor(t){this.feed=t.feed,this.media=t.media,this.buffer=t.buffer,this.dimensions=t.dimensions,this.region=[0,0,...this.dimensions],this.size=this.dimensions[0]*this.dimensions[1],this.take=null,this.frames=[],this.tape=this.buffer.getContext("2d"),this.feed.addEventListener("play",this.play.bind(this)),this.feed.addEventListener("pause",this.pause.bind(this)),navigator.mediaDevices.getUserMedia(this.media).then(this.connect.bind(this))}record(){this.tape.drawImage(this.feed,...this.region),this.frames.push(this.tape.getImageData(...this.region).data)}play(){this.take=setInterval(this.record.bind(this))}pause(){clearInterval(this.take),this.export(this.save()),this.frames.length=0}save(){const t=new Uint8ClampedArray(4*this.size*this.frames.length);for(let e=0;e<this.frames.length;e++)t.set(this.frames[e],4*this.size*e);return t}connect(t){this.feed.srcObject=t}}({media:{video:!0},dimensions:[20,20],feed:document.all.videofeed,buffer:document.all.backstage})}}),window.gl=new class{constructor(t){for(const e in t.target)this[e]=t.target[e];this.runtime=t.target}program(){return new ct({runtime:this.runtime})}}({target:document.all.mainstage.getContext("webgl")})}]);